Vue.component("navbar",{methods:{}}),Vue.component("search",{methods:{find:function(e){!e||"Enter"!=e.key&&null!=e.key||App.list()}}}),Vue.component("grid",{props:["items","offline"],methods:{like:function(e){App.saveLike(e)}}});var router=new VueRouter,App=new Vue({el:"#vue-app",router:router,created:function(){this.likes=JSON.parse(localStorage.getItem("pwa-likes"))||[]},beforeMount:function(){this.setRoute()},methods:{list:function(){var e=this;e.items=[],$.ajax({url:e.imagesApi+"&q="+e.searchField,dataType:"json"}).done(function(i){i.hits&&i.hits.length&&$(i.hits).each(function(i,t){t.liked=!1,e.isLiked(t)&&(t.liked=!0),e.items.push(t)}),i.offline?e.offline=!0:e.offline=!1})},listLikes:function(){this.items=this.likes},saveLike:function(e){if(this.isLiked(e)){var i=this.likes.indexOf(e);-1!==i&&this.likes.splice(i,1),e.liked=!1}else this.likes.push(e),e.liked=!0;localStorage.setItem("pwa-likes",JSON.stringify(this.likes))},isLiked:function(e){return this.likes.filter(i=>i.id===e.id).length},setRoute:function(){"/favoritos"==this.$route.path?this.listLikes():this.list()}},watch:{searchField:function(e){searchField=e},$route:function(e,i){this.setRoute()}},data:function(){return{items:[],offline:!1,likes:[],searchField:"",apiParams:{key:"10163233-bd34ba2f90890821e4fed4fe3",image_type:"photo",per_page:10}}},computed:{imagesApi:function(){return"https://pixabay.com/api/?"+$.param(this.apiParams)}}});